<!DOCTYPE html>
<html lang="ca">

    <head>
          <meta charset="iso-8859-1">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">
  <meta name="description" content="Institut d'avaluació i qualitat del sistema educatiu">
  <meta name="author" content="iaqse@iaqse.caib.es">
	<meta name="language" content="cat">
  
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<meta name="robots" content="index,follow">
	<meta name="document-classification" content="Education">
	<meta name="document-type" content="Public">
	<meta name="document-rating" content="Safe for Kids">
	  
	<link rel="icon" href="../css/img/favicon.ico" type="image/x-icon">
	<link rel="shortcut icon" type="image/x-icon" href="../css/img/favicon.ico">	 
	 

  <title>IAQSE</title>
  <link href="iaqse_bundle.min.css" rel="stylesheet">
  <link href="../css/assets/fontawesome/css/all.min.css" rel="stylesheet">
  <script src="iaqse_bundle1.min.js"></script> 
  

<script>window.chunker=function(e,n){for(var r=[],t=0,i=e.length;t<i;t+=n)r.push(e.slice(t,t+n));return r},window.getURLParameter=function(e){var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.search);return null==n?"":decodeURIComponent(n[1].replace(/\+/g," "))},window.app=angular.module("iaqse",["ngRoute","ngSanitize","ngAnimate"]),app.config(["$sceProvider",function(e){e.enabled(!1)}]),app.service("httpService",["$http",function(n){return{loadSchema:function(e){return n({method:"get",url:"database/"+e+".json",dataType:"json",contentType:"application/json; charset=iso-8859-1"})}}}]),window.app.filter("fileName",function(){return function(e){var n=e.lastIndexOf("/");return e.substring(n+1)}}),window.app.filter("icona",function(){return function(e){var n=e.substring(e.lastIndexOf(".")+1).trim().toLowerCase();return"word"==n?"fa-file-word":"zip"==n||"rar"==n?"fa-file-archive":"pdf"==n?"fa-file-pdf":"mp4"==n||"avi"==n||"mov"==n||"qt"==n?"fa-file-video":"mp3"==n||"ogg"==n?"fa-file-audio":"fa-file"}}),window.app.config(["$controllerProvider","$provide","$compileProvider","$filterProvider",function(r,t,i,o){app._controller=app.controller,app._service=app.service,app._filter=app.filter,app._component=app.component,app._factory=app.factory,app._value=app.value,app._directive=app.directive,app.controller=function(e,n){return r.register(e,n),this},app.service=function(e,n){return t.service(e,n),this},app.factory=function(e,n){return t.factory(e,n),this},app.value=function(e,n){return t.value(e,n),this},app.filter=function(e,n){return o.register(e,n),this},app.component=function(e,n){return i.component(e,n),this},app.directive=function(e,n){return i.directive(e,n),this}}])</script>
    </head>

    <body> 
        <header>
              <nav class="navbar navbar-expand-md navbar-dark fixed-top gradient" style="background-color:#036!important">
    <div class="container">
      <a class="navbar-brand" href="index.html">
        <img src="../img/svg/qiaqse2.png" style="height:25px">
        <span><b class="d-md-none d-xl-inline" style="color:#ff4646;font-family:Arial,Helvetica,sans-serif;vertical-align:top">IAQSE</b></span>
      </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          
          <li class="nav-item">
            <a class="nav-link" href="index.html" title="">Inici
            </a>
          </li>
          
          <li class="nav-item">
            <a class="nav-link" href="quisom.html" title="">Qui som
            </a>
          </li>
          
          <li class="nav-item">
            <a class="nav-link" href="avaluacions.html" title="">Avaluacions
            </a>
          </li>
          
          <li class="nav-item">
            <a class="nav-link" href="publicacions.html" title="">Publicacions
            </a>
          </li>
          
          <li class="nav-item">
            <a class="nav-link" href="indicadors.html" title="">Indicadors
            </a>
          </li>
          
          <li class="nav-item">
            <a class="nav-link" href="enllacos.html" title="">Enllaços
            </a>
          </li>
          
          <li class="nav-item">
            <a class="nav-link" href="proves.html" title="Proves alliberades">Proves
            </a>
          </li>
          
        </ul>
      </div>
    </div>
  </nav>
  
        </header>

        <div id="main-wrap" class="container-fluid">
                <main ng-app="iaqse">
                
<nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="index.html"><i class="fas fa-home"></i></a></li> 
          <li class="breadcrumb-item active"> Prova interactiva </li>  
        </ol>
        </nav>
        

<a href="proves.html#!/interactives" style="float:right" class="btn btn-sm btn-warning">Tancau la prova</a>
<div ng-controller="mainController">
        <iaqse-prova prova="prova" ng-if="prova!=null"></iaqse-prova>

        <div ng-if="mostraError" class="alert alert-danger">
                <h5>:-( S'ha produït un error</h5>
                <p>No s'ha trobat la prova amb identificador id={{id}}</p>
                <a href="proves.html#!/interactives" class="btn btn-sm btn-warning">Tornau a proves</a>
        </div>
</div>
<script>var shuffleArray=function(e){var t,r,n;for(n=e.length-1;0<n;n--)t=Math.floor(Math.random()*(n+1)),r=e[n],e[n]=e[t],e[t]=r;return e};app.component("iaqseProva",{templateUrl:"iaqse-prova.html",bindings:{prova:"<"},controller:function(){var l=this;l.indexEstimul=0,l.indexPregunta=0,l.numEstimuls=0,l.numPreguntes=0,l.$onChanges=function(e){console.log("iaqseProva-changes",e),l.reset()},l.backEstimul=function(){return 0<l.indexEstimul&&(l.indexEstimul--,l.estimulSelected=l.prova.estimuls[l.indexEstimul],l.indexPregunta=0,l.preguntaSelected=l.estimulSelected.preguntes[l.indexPregunta],!0)},l.nextEstimul=function(){return l.indexEstimul<l.prova.estimuls.length-1&&(l.indexEstimul++,l.estimulSelected=l.prova.estimuls[l.indexEstimul],l.indexPregunta=0,l.preguntaSelected=l.estimulSelected.preguntes[l.indexPregunta],!0)},l.backPregunta=function(){0<l.indexPregunta?(l.indexPregunta--,l.preguntaSelected=l.estimulSelected.preguntes[l.indexPregunta]):l.backEstimul()&&(l.indexPregunta=l.estimulSelected.preguntes.length-1,l.preguntaSelected=l.estimulSelected.preguntes[l.indexPregunta])},l.nextPregunta=function(){l.indexPregunta<l.estimulSelected.preguntes.length-1?(l.indexPregunta++,l.preguntaSelected=l.estimulSelected.preguntes[l.indexPregunta]):l.nextEstimul(0)},l.gotoPregunta=function(e,t){l.indexEstimul=e,l.indexPregunta=t,l.estimulSelected=l.prova.estimuls[e],l.preguntaSelected=l.estimulSelected.preguntes[t]},l.gotoPreguntaReview=function(e,t){l.estimulReview=l.prova.estimuls[e],l.preguntaReview=l.estimulReview.preguntes[t]},l.styleClassPregunta=function(e){var t="btn-secondary";return null!=e.answer&&(t="btn-primary",null!=e.esCorrecta&&(t=e.esCorrecta?"btn-success":"btn-danger")),t},l.reset=function(){var e=l.prova;if(l.estatProva=0,l.progressPercent=0,e){l.numEstimuls=e.estimuls.length,l.indexEstimul=0,l.indexPregunta=0,l.estimulSelected=e.estimuls[l.indexEstimul],l.preguntaSelected=l.estimulSelected.preguntes[l.indexPregunta];for(var t=1,r=0,n=e.estimuls.length;r<n;r++)for(var s=e.estimuls[r],a=0,u=s.preguntes.length;a<u;a++){var i=s.preguntes[a];if(i.numero=t,t++,i.answer=null,i.esCorrecta=null,i.opcions){var o=i.opcions[i.ordre-1];i.opcions=shuffleArray(i.opcions),i.ordre=i.opcions.indexOf(o)}}l.numPreguntes=t-1}},l.updateProgress=function(){for(var e=0,t=0,r=l.prova.estimuls.length;t<r;t++)for(var n=l.prova.estimuls[t],s=0,a=n.preguntes.length;s<a;s++){var u=n.preguntes[s];null!=u.answer&&("number"==typeof u.answer||"string"==typeof u.answer&&0<u.answer.trim().length)&&e++}l.progressPercent=0===e?0:(100*e/l.numPreguntes).toFixed(0)},l.corregirProva=function(){for(var e=0,t=0,r=l.prova.estimuls.length;t<r;t++)for(var n=l.prova.estimuls[t],s=0,a=n.preguntes.length;s<a;s++){var u=n.preguntes[s];if(null!=u.answer){if(null!=u.opcions)u.esCorrecta=u.ordre==u.answer;else if(null!=u.tolerance)try{var i=parseFloat(u.answer.replace(",","."));u.esCorrecta=Math.abs(i-u.ordre)<=u.tolerance}catch(e){u.esCorrecta=!1}else u.esCorrecta=u.ordre==u.answer;u.esCorrecta&&e++}}l.estatProva=2,l.estimulReview=null,l.preguntaReview=null,l.puntuacio=(100*e/l.numPreguntes).toFixed(0)}}}),app.component("iaqseEstimul",{templateUrl:"iaqse-estimul.html",bindings:{estimul:"<",question:"<"},require:{provaCtrl:"^^iaqseProva"},controller:function(){var t=this;this.$onChanges=function(e){t.preguntaSelected=this.question,t.numPreguntes=t.provaCtrl.numPreguntes,t.estatProva=t.provaCtrl.estatProva,console.log("iaqseEstimul-changes",e,t.numPreguntes)},this.check=function(){t.provaCtrl.corregirProva()},t.updateProgress=function(){t.provaCtrl.updateProgress()}}}),app.component("iaqsePregunta",{templateUrl:"iaqse-pregunta.html",bindings:{pregunta:"<"},require:{estimulCtrl:"^^iaqseEstimul"},controller:function(){var t=this;t.$onChanges=function(e){t.numPreguntes=t.estimulCtrl.numPreguntes,t.estatProva=t.estimulCtrl.estatProva,console.log("iaqsePregunta-changes",e,t.numPreguntes)},t.updateProgress=function(){t.estimulCtrl.updateProgress()}}}),app.controller("mainController",["$scope","httpService",function(l,a){l.prova=null;var u=getURLParameter("id"),g=getURLParameter("lang");(l.id=u)?a.loadSchema("proves_interactives").then(function(e){proves=e.data;var i=null;try{u=parseInt(u)}catch(e){}if(0<u&&u<=proves.length&&(i=proves[u-1]),null==i)l.mostraError=!0;else if(i.contingut){var t="";if("string"==typeof i.contingut)t=i.contingut;else if(Array.isArray(i.contingut)&&g)for(var r=0,n=i.contingut.length;r<n;r++){var s=i.contingut[r];if(s.lang==g){t=s.file;break}}else l.mostraError=!0;var o='src="../proves_interactives/'+t+"/";console.log("Carregant "+t),a.loadSchema(t).then(function(e){i.estimuls=e.data,console.log("S'ha carregat: "+i);for(var t=0,r=i.estimuls.length;t<r;t++){var n=i.estimuls[t];Array.isArray(n.estimul_body)&&(n.estimul_body=n.estimul_body.join(" ")),n.estimul_body=n.estimul_body.replace(/src=\"/gi,o);for(var s=0,a=n.preguntes.length;s<a;s++){var u=n.preguntes[s];Array.isArray(u.enunciat)&&(u.enunciat=u.enunciat.join(" ")),u.enunciat=u.enunciat.replace(/src=\"/gi,o)}}console.log(i),l.prova=i},function(e){console.log("Hi ha hagut un problema carregant la definició de la prova. Prova corrupta!: "+e),l.mostraError=!0})}}):l.mostraError=!0}]),app.filter("toLetter",function(){return function(e){return String.fromCharCode(65+e)+") "}})</script>

<script type="text/ng-template" id="iaqse-prova.html">

        <h4 ng-bind-html="$ctrl.prova.title"></h4>

        <!--mostra les instruccions-->
        <div ng-if="$ctrl.estatProva==0">
                <center><h5 style="font-weight:800; color:white; background: brown;">Instruccions</h5></center>
                <div style="margin:20px; border:1px solid gray; background:#f2dbda; padding: 10px;">
                <p ng-bind="$ctrl.prova.instruccions"></p>
                </div>
                <div style="margin:auto; text-align:center;">
                <button class="btn btn-primary" ng-click="$ctrl.estatProva=1;">Començar la prova</button>
                </div>
        </div>
        

        <div ng-if="$ctrl.estatProva==1 || $ctrl.estatProva==3">
        <div style=" border: 1px solid gray;  width: 100%">
                        <!--
                        <button style="float:left" class="btn btn-success" ng-click="$ctrl.corregirProva()"><i class="fa fa-check"></i> Corregeix la prova</button>    
                        -->        
                        <div class="progress">
                                <div class="progress-bar" role="progressbar" style="width: {{$ctrl.progressPercent}}%;" aria-valuenow="0" 
                                aria-valuemin="0" aria-valuemax="100">{{$ctrl.progressPercent}}%</div>
                        </div>
        </div> 
        <div style="border: 1px solid grey; margin-bottom: 10px; text-align: center; margin: auto">
                <!--
                <button style="float:left" class="btn btn-sm btn-secondary" ng-click="$ctrl.backEstimul()"
                ng-disabled="$ctrl.indexEstimul < 1"><i class="fa fa-backward"></i> Anterior</button>
                -->
                <span style="font-size: 120%"><b>Situació <span ng-bind="$ctrl.indexEstimul+1"></span></b></span>
                <!--
                <button style="float:right" class="btn btn-sm btn-secondary" ng-click="$ctrl.nextEstimul()"
                ng-disabled="$ctrl.indexEstimul > $ctrl.numEstimuls -1"> Següent <i class="fa fa-forward"></i></button>
                -->
        </div>
        <!--quan carreguis l'estimul, mostra la pregunta question d'aquest estimul -->
        <iaqse-estimul estimul="$ctrl.estimulSelected" question="$ctrl.preguntaSelected"></iaqse-estimul>
        
        <br><br>
        <!--botonera-->
        <button class="btn btn-secondary" ng-click="$ctrl.backPregunta()"
        ng-disabled="$ctrl.preguntaSelected.numero<=1"><i class="fa fa-chevron-left"></i> Pregunta anterior</button>
        <button class="btn btn-secondary" ng-click="$ctrl.nextPregunta()"
        ng-disabled="$ctrl.preguntaSelected.numero>$ctrl.numPreguntes-1">Pregunta següent <i class="fa fa-chevron-right"></i></button>
        <button class="btn btn-success" ng-click="$ctrl.corregirProva()"
        ng-if="$ctrl.preguntaSelected.numero==$ctrl.numPreguntes && $ctrl.estatProva==1"
        ng-disabled="$ctrl.progressPercent==0"><i class="fa fa-check"></i> Acabar i corregir</button>
       
        <!--nav-bar-->
        <br><br>
        <div>
                <div ng-repeat="estimul in $ctrl.prova.estimuls" style="display: inline-block">
                        <div ng-repeat="pregunta in estimul.preguntes" style="display: inline-block; vertical-align: top">
                                <div style="text-align: center">
                                <button class="btn btn-sm" ng-class="$ctrl.styleClassPregunta(pregunta)"
                                ng-click="$ctrl.gotoPregunta($parent.$index, $index)">
                                        <span ng-bind="pregunta.numero"></span>        
                                </button>
                                <br>
                                <span ng-if="pregunta.numero == $ctrl.preguntaSelected.numero"><i class="fa fa-arrow-up"></i></span>
                                <span ng-if="pregunta.numero != $ctrl.preguntaSelected.numero"> </span>
                                </div>
                        </div>
                </div>
        </div>
        </div>  

        <!--Prova acabada-->
        <div ng-if="$ctrl.estatProva==2">
                <h5>Prova acabada - Puntuació <span ng-bind="$ctrl.puntuacio"></span>%</h5>
                <div>
                        <div ng-repeat="estimul in $ctrl.prova.estimuls" style="display: inline-block">
                                        <div ng-repeat="pregunta in estimul.preguntes" style="display: inline-block; vertical-align: top">
                                                <div style="margin:auto; text-align: center;">
                                                <button class="btn" ng-class="$ctrl.styleClassPregunta(pregunta)" style="width: 36px"
                                                ng-click="$ctrl.gotoPreguntaReview($parent.$index, $index)">
                                                        <span ng-bind="pregunta.numero"></span>        
                                                </button>
                                                <br>
                                                <span ng-if="pregunta.numero == $ctrl.preguntaSelected.numero"><i class="fa fa-arrow-up"></i></span>
                                                <span ng-if="pregunta.numero != $ctrl.preguntaSelected.numero"> </span>
                                                </div>
                                        </div>
                        </div>
                        <button ng-if="$ctrl.estimulReview!=null && $ctrl.preguntaReview!=null" style="float: right; margin-top: 60px"
                        class="btn btn-sm btn-danger" title="Tancau la previsualització" ng-click="$ctrl.estimulReview=null;"><i class="fa fa-times"></i></button> 
                        <div ng-if="$ctrl.estimulReview!=null && $ctrl.preguntaReview!=null">
                                <iaqse-estimul estimul="$ctrl.estimulReview" question="$ctrl.preguntaReview"></iaqse-estimul>
                        </div>
                </div>
                
                <button class="btn btn-primary" ng-click="$ctrl.reset()"><i class="fa fa-redo"></i> Tornau a començar</button> 
        </div>
</script>

<script type="text/ng-template" id="iaqse-estimul.html">
        <div style="background: #f2dbda; border: 1px solid gray; min-height: 200px; width: 100%">
                <center>
                <h4 style="background: brown; font-weight:800; color:white; border-radius: 5px" ng-bind-html="$ctrl.estimul.estimul"></h4>
                <div ng-bind-html="$ctrl.estimul.estimul_body"></div>
                </center>
        </div>      
        <br>
        <iaqse-pregunta pregunta="$ctrl.preguntaSelected"></iaqse-pregunta>
     
</script>

<script type="text/ng-template" id="iaqse-pregunta.html">
        <h5><span style="font-weight:800;"> Pregunta
        <span ng-bind="$ctrl.pregunta.numero"></span> / <span ng-bind="$ctrl.numPreguntes"></span>.
        <span ng-if="$ctrl.pregunta.esCorrecta!=null">
                <span style="color:green" ng-if="$ctrl.pregunta.esCorrecta"><i class="fa fa-check"></i></span>
                <span style="color:red" ng-if="!$ctrl.pregunta.esCorrecta"><i class="fa fa-times"></i></span>
        </span>
        </span>
        <span ng-bind-html="$ctrl.pregunta.enunciat"></span></h5>
        <div class="form-check" ng-repeat="opt in $ctrl.pregunta.opcions" ng-if="$ctrl.pregunta.opcions!=null">
            <input class="form-check-input" type="radio" ng-model="$ctrl.pregunta.answer" ng-value="$index" ng-change="$ctrl.updateProgress()"
            ng-disabled="$ctrl.estatProva!=1"/>  
            <label class="form-check-label">
            <h5>{{$index | toLetter}}
            <span ng-bind-html="opt"></span> 
            </h5>     
            </label>
        </div>     
        <div ng-if="$ctrl.pregunta.opcions==null">
                <input class="form-control" type="text" ng-model="$ctrl.pregunta.answer" ng-blur="$ctrl.updateProgress()"
                ng-disabled="$ctrl.estatProva!=1"/>                  
        </div>                                               
</script></main>    
                
            <a href="#" id="back-to-top" class="btn btn-primary btn-lg" role="button"><i class="fa fa-chevron-circle-up" aria-hidden="true"></i></a>

<script src="iaqse_bundle2.min.js"></script>

<script>var replaceImgSvg=function(e,a){var g=$(e);g.length&&$.ajax({type:"GET",url:a,contentType:"image/svg+xml;charset=ISO-8859-1",success:function(e){var a=$(e.documentElement);a.addClass(g.attr("class")),g.replaceWith(a)}})};$(function(){$("#tree1").treed(),replaceImgSvg("#svg-brand","../img/svg/qiaqse2.svg"),$("#iaqse-brand").css("display",""),replaceImgSvg("#svg-logo-cab","../img/svg/iaqse-caib-w.svg"),replaceImgSvg("#logo-iaqse","../img/svg/logo-iaqse.svg")}),function(e,a,g,s,t,c,n){e.GoogleAnalyticsObject=t,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(g),n=a.getElementsByTagName(g)[0],c.async=1,c.src="//www.google-analytics.com/analytics.js",n.parentNode.insertBefore(c,n)}(window,document,"script",0,"ga"),ga("create","UA-40778701-3","auto"),ga("send","pageview")</script>
        </div> 

</body>

</html>