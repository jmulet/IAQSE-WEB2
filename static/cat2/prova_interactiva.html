<!DOCTYPE html>
<html lang="ca">

    <head>
          <meta charset="iso-8859-1">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">
  <meta name="description" content="Institut d'avaluació i qualitat del sistema educatiu">
  <meta name="author" content="iaqse@iaqse.caib.es">
	<meta name="language" content="cat">
  
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<meta name="robots" content="index,follow">
	<meta name="document-classification" content="Education">
	<meta name="document-type" content="Public">
	<meta name="document-rating" content="Safe for Kids">
	  
	<link rel="icon" href="../css/img/favicon.ico" type="image/x-icon">
	<link rel="shortcut icon" type="image/x-icon" href="../css/img/favicon.ico">	 
	 

  <title>IAQSE</title>
  <link href="iaqse_bundle.min.css" rel="stylesheet">
  <link href="../css/assets/fontawesome/css/all.min.css" rel="stylesheet">
  <script src="iaqse_bundle1.min.js"></script> 
  

<script>window.chunker=function(e,n){for(var r=[],t=0,i=e.length;t<i;t+=n)r.push(e.slice(t,t+n));return r},window.getURLParameter=function(e){var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.search);return null==n?"":decodeURIComponent(n[1].replace(/\+/g," "))},window.app=angular.module("iaqse",["ngRoute","ngSanitize","ngAnimate"]),app.config(["$sceProvider",function(e){e.enabled(!1)}]),app.service("httpService",["$http",function(n){return{loadSchema:function(e){return n({method:"get",url:"database/"+e+".json",dataType:"json",contentType:"application/json; charset=iso-8859-1"})}}}]),window.app.filter("fileName",function(){return function(e){var n=e.lastIndexOf("/");return e.substring(n+1)}}),window.app.filter("icona",function(){return function(e){var n=e.substring(e.lastIndexOf(".")+1).trim().toLowerCase();return"word"==n?"fa-file-word":"zip"==n||"rar"==n?"fa-file-archive":"pdf"==n?"fa-file-pdf":"mp4"==n||"avi"==n||"mov"==n||"qt"==n?"fa-file-video":"mp3"==n||"ogg"==n?"fa-file-audio":"fa-file"}}),window.app.config(["$controllerProvider","$provide","$compileProvider","$filterProvider",function(r,t,i,o){app._controller=app.controller,app._service=app.service,app._filter=app.filter,app._component=app.component,app._factory=app.factory,app._value=app.value,app._directive=app.directive,app.controller=function(e,n){return r.register(e,n),this},app.service=function(e,n){return t.service(e,n),this},app.factory=function(e,n){return t.factory(e,n),this},app.value=function(e,n){return t.value(e,n),this},app.filter=function(e,n){return o.register(e,n),this},app.component=function(e,n){return i.component(e,n),this},app.directive=function(e,n){return i.directive(e,n),this}}])</script>
    </head>

    <body> 
        <header>
              <nav class="navbar navbar-expand-md navbar-dark fixed-top gradient" style="background-color:#036!important">
    <div class="container">
      <a class="navbar-brand" href="index.html">
        <img src="../img/svg/qiaqse2.png" style="height:25px">
        <span><b class="d-md-none d-xl-inline" style="color:#ff4646;font-family:Arial,Helvetica,sans-serif;vertical-align:top">IAQSE</b></span>
      </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          
          <li class="nav-item">
            <a class="nav-link" href="index.html" title="">Inici
            </a>
          </li>
          
          <li class="nav-item">
            <a class="nav-link" href="quisom.html" title="">Qui som
            </a>
          </li>
          
          <li class="nav-item">
            <a class="nav-link" href="avaluacions.html" title="">Avaluacions
            </a>
          </li>
          
          <li class="nav-item">
            <a class="nav-link" href="publicacions.html" title="">Publicacions
            </a>
          </li>
          
          <li class="nav-item">
            <a class="nav-link" href="indicadors.html" title="">Indicadors
            </a>
          </li>
          
          <li class="nav-item">
            <a class="nav-link" href="enllacos.html" title="">Enllaços
            </a>
          </li>
          
          <li class="nav-item">
            <a class="nav-link" href="proves.html" title="Proves alliberades">Proves
            </a>
          </li>
          
        </ul>
      </div>
    </div>
  </nav>
  
        </header>

        <div id="main-wrap" class="container-fluid">
                <main ng-app="iaqse">
                
<nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="index.html"><i class="fas fa-home"></i></a></li> 
          <li class="breadcrumb-item active"> Prova interactiva </li>  
        </ol>
        </nav>
        

<a href="proves.html#!/interactives" style="float:right" class="btn btn-sm btn-warning">Tornau a proves</a>
<div ng-controller="mainController">
        <iaqse-prova prova="prova" ng-if="prova!=null"></iaqse-prova>

        <div ng-if="mostraError" class="alert alert-danger">
                <h5>:-( S'ha produït un error</h5>
                <p>No s'ha trobat la prova amb identificador id={{id}}</p>
                <a href="proves.html#!/interactives" class="btn btn-sm btn-warning">Tornau a proves</a>
        </div>
</div>
<script>function shuffleArray(e){var t,n,r;for(r=e.length-1;0<r;r--)t=Math.floor(Math.random()*(r+1)),n=e[r],e[r]=e[t],e[t]=n;return e}app.component("iaqseProva",{templateUrl:"iaqse-prova.html",bindings:{prova:"<"},controller:function(){var c=this;c.indexEstimul=0,c.indexPregunta=0,c.numEstimuls=0,c.numPreguntes=0,c.$onChanges=function(e){console.log("iaqseProva-changes",e);var t=this.prova;if(t){c.numEstimuls=t.estimuls.length,c.indexEstimul=0,c.indexPregunta=0,c.estimulSelected=t.estimuls[c.indexEstimul],c.preguntaSelected=c.estimulSelected.preguntes[c.indexPregunta];for(var n=1,r=0,a=t.estimuls.length;r<a;r++)for(var i=t.estimuls[r],s=0,l=i.preguntes.length;s<l;s++){var u=i.preguntes[s];if(u.numero=n,n++,u.opcions){var o=u.opcions[u.ordre-1];u.opcions=shuffleArray(u.opcions),u.ordre=u.opcions.indexOf(o)}}c.numPreguntes=n-1}},c.backEstimul=function(){return 0<c.indexEstimul&&(c.indexEstimul--,c.estimulSelected=c.prova.estimuls[c.indexEstimul],c.indexPregunta=0,c.preguntaSelected=c.estimulSelected.preguntes[c.indexPregunta],!0)},c.nextEstimul=function(){return c.indexEstimul<c.prova.estimuls.length-1&&(c.indexEstimul++,c.estimulSelected=c.prova.estimuls[c.indexEstimul],c.indexPregunta=0,c.preguntaSelected=c.estimulSelected.preguntes[c.indexPregunta],!0)},c.backPregunta=function(){0<c.indexPregunta?(c.indexPregunta--,c.preguntaSelected=c.estimulSelected.preguntes[c.indexPregunta]):c.backEstimul()&&(c.indexPregunta=c.estimulSelected.preguntes.length-1,c.preguntaSelected=c.estimulSelected.preguntes[c.indexPregunta])},c.nextPregunta=function(){c.indexPregunta<c.estimulSelected.preguntes.length-1?(c.indexPregunta++,c.preguntaSelected=c.estimulSelected.preguntes[c.indexPregunta]):c.nextEstimul(0)},c.gotoPregunta=function(e,t){c.indexEstimul=e,c.indexPregunta=t,c.estimulSelected=c.prova.estimuls[e],c.preguntaSelected=c.estimulSelected.preguntes[t]},c.styleClassPregunta=function(e){var t="btn-secondary";return null!=e.answer&&(t="btn-primary",null!=e.esCorrecta&&(t=e.esCorrecta?"btn-success":"btn-danger")),t},c.corregirProva=function(){for(var e=0,t=c.prova.estimuls.length;e<t;e++)for(var n=c.prova.estimuls[e],r=0,a=n.preguntes.length;r<a;r++){var i=n.preguntes[r];if(null!=i.answer)if(null!=i.opcions)i.esCorrecta=i.ordre==i.answer;else if(null!=i.tolerance)try{var s=parseFloat(i.answer.replace(",","."));i.esCorrecta=Math.abs(s-i.ordre)<=i.tolerance}catch(e){i.esCorrecta=!1}else i.esCorrecta=i.ordre==i.answer}}}}),app.component("iaqseEstimul",{templateUrl:"iaqse-estimul.html",bindings:{estimul:"<",question:"<"},require:{provaCtrl:"^^iaqseProva"},controller:function(){var t=this;this.$onChanges=function(e){console.log("iaqseEstimul-changes",e),t.preguntaSelected=this.question},this.check=function(){t.provaCtrl.corregirProva()}}}),app.component("iaqsePregunta",{templateUrl:"iaqse-pregunta.html",bindings:{pregunta:"<"},require:{estimulCtrl:"^^iaqseEstimul"},controller:function(){this.$onChanges=function(e){console.log("iaqsePregunta-changes",e)}}}),app.controller("mainController",["$scope","httpService",function(o,i){o.prova=null;var s=getURLParameter("id"),c=getURLParameter("lang");(o.id=s)?i.loadSchema("proves_interactives").then(function(e){proves=e.data;var l=null;try{s=parseInt(s)}catch(e){}if(0<s&&s<=proves.length&&(l=proves[s-1]),null==l)o.mostraError=!0;else if(l.contingut){var t="";if("string"==typeof l.contingut)t=l.contingut;else if(Array.isArray(l.contingut)&&c)for(var n=0,r=l.contingut.length;n<r;n++){var a=l.contingut[n];if(a.lang==c){t=a.file;break}}else o.mostraError=!0;var u='src="../proves_interactives/'+t+"/";console.log("Carregant "+t),i.loadSchema(t).then(function(e){l.estimuls=e.data,console.log("S'ha carregat: "+l);for(var t=0,n=l.estimuls.length;t<n;t++){var r=l.estimuls[t];Array.isArray(r.estimul_body)&&(r.estimul_body=r.estimul_body.join(" ")),r.estimul_body=r.estimul_body.replace(/src=\"/gi,u);for(var a=0,i=r.preguntes.length;a<i;a++){var s=r.preguntes[a];Array.isArray(s.enunciat)&&(s.enunciat=s.enunciat.join(" ")),s.enunciat=s.enunciat.replace(/src=\"/gi,u)}}console.log(l),o.prova=l},function(e){console.log("Hi ha hagut un problema carregant la definició de la prova. Prova corrupta!: "+e),o.mostraError=!0})}}):o.mostraError=!0}]),app.filter("toLetter",function(){return function(e){return String.fromCharCode(65+e)+") "}})</script>

<script type="text/ng-template" id="iaqse-prova.html">

        <h3 ng-bind-html="$ctrl.prova.title"></h3>
       
        <div style=" border: 1px solid gray;  width: 100%">
                        <button style="float:left" class="btn btn-success" ng-click="$ctrl.corregirProva()"><i class="fa fa-check"></i> Corregeix la prova</button>    
                        <div class="progress">
                                <div class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" 
                                aria-valuemin="0" aria-valuemax="100">0%</div>
                        </div>
                        <div class="progress">
                                <div class="progress-bar bg-success" role="progressbar" style="width: 0%;" aria-valuenow="0" 
                                aria-valuemin="0" aria-valuemax="100">0%</div>
                        </div>            
        </div>
        <br>
        <div style="border: 1px solid grey; margin-bottom: 10px; text-align: center; margin: auto">
                <button style="float:left" class="btn btn-sm btn-secondary" ng-click="$ctrl.backEstimul()"
                ng-disabled="$ctrl.indexEstimul < 1"><i class="fa fa-backward"></i> Anterior</button>
                <span style="font-size: 120%"><b>Situació <span ng-bind="$ctrl.indexEstimul+1"></span></b></span>
                <button style="float:right" class="btn btn-sm btn-secondary" ng-click="$ctrl.nextEstimul()"
                ng-disabled="$ctrl.indexEstimul > $ctrl.numEstimuls -1"> Següent <i class="fa fa-forward"></i></button>
        </div>
        <!--quan carreguis l'estimul, mostra la pregunta question d'aquest estimul -->
        <iaqse-estimul estimul="$ctrl.estimulSelected" question="$ctrl.preguntaSelected"></iaqse-estimul>
        
        <br><br>
        <!--botonera-->
        <button class="btn btn-secondary" ng-click="$ctrl.backPregunta()"
        ng-disabled="$ctrl.preguntaSelected.numero<=1"><i class="fa fa-chevron-left"></i> Pregunta anterior</button>
        <button class="btn btn-secondary" ng-click="$ctrl.nextPregunta()"
        ng-disabled="$ctrl.preguntaSelected.numero>$ctrl.numPreguntes-1">Pregunta següent <i class="fa fa-chevron-right"></i></button>
       
        <!--nav-bar-->
        <br><br>
        <div>
                <div ng-repeat="estimul in $ctrl.prova.estimuls" style="display: inline-block">
                        <div ng-repeat="pregunta in estimul.preguntes" style="display: inline-block; vertical-align: top">
                                <div>
                                <button class="btn btn-sm" ng-class="$ctrl.styleClassPregunta(pregunta)"
                                ng-click="$ctrl.gotoPregunta($parent.$index, $index)">
                                        <span ng-bind="pregunta.numero"></span>        
                                </button>
                                <br>
                                <span ng-if="pregunta.numero == $ctrl.preguntaSelected.numero"><i class="fa fa-arrow-up"></i></span>
                                <span ng-if="pregunta.numero != $ctrl.preguntaSelected.numero"> </span>
                                </div>
                        </div>
                </div>
        </div>

</script>

<script type="text/ng-template" id="iaqse-estimul.html">
        <div style="background: #f2dbda; border: 1px solid gray; min-height: 200px; width: 100%">
                <center>
                <h4 style="background: brown; font-weight:800; color:white; border-radius: 5px" ng-bind-html="$ctrl.estimul.estimul"></h4>
                <div ng-bind-html="$ctrl.estimul.estimul_body"></div>
                </center>
        </div>      
        <br>
        <iaqse-pregunta pregunta="$ctrl.preguntaSelected"></iaqse-pregunta>
     
</script>

<script type="text/ng-template" id="iaqse-pregunta.html">
        <h5><span style="font-weight:800;"> Pregunta
        <span ng-bind="$ctrl.pregunta.numero"></span>.
        <span ng-if="$ctrl.pregunta.esCorrecta!=null">
                <span style="color:green" ng-if="$ctrl.pregunta.esCorrecta"><i class="fa fa-check"></i></span>
                <span style="color:red" ng-if="!$ctrl.pregunta.esCorrecta"><i class="fa fa-times"></i></span>
        </span>
        </span>
        <span ng-bind-html="$ctrl.pregunta.enunciat"></span></h5>
        <div class="form-check" ng-repeat="opt in $ctrl.pregunta.opcions" ng-if="$ctrl.pregunta.opcions!=null">
            <input class="form-check-input" type="radio" ng-model="$ctrl.pregunta.answer" ng-value="$index"/>  
            <label class="form-check-label">
            <h5>{{$index | toLetter}}
            <span ng-bind-html="opt"></span> 
            </h5>     
            </label>
        </div>     
        <div ng-if="$ctrl.pregunta.opcions==null">
                <input class="form-control" type="text" ng-model="$ctrl.pregunta.answer"/>                  
        </div>                                               
</script></main>    
                
            <a href="#" id="back-to-top" class="btn btn-primary btn-lg" role="button"><i class="fa fa-chevron-circle-up" aria-hidden="true"></i></a>

<script src="iaqse_bundle2.min.js"></script>

<script>var replaceImgSvg=function(e,a){var g=$(e);g.length&&$.ajax({type:"GET",url:a,contentType:"image/svg+xml;charset=ISO-8859-1",success:function(e){var a=$(e.documentElement);a.addClass(g.attr("class")),g.replaceWith(a)}})};$(function(){$("#tree1").treed(),replaceImgSvg("#svg-brand","../img/svg/qiaqse2.svg"),$("#iaqse-brand").css("display",""),replaceImgSvg("#svg-logo-cab","../img/svg/iaqse-caib-w.svg"),replaceImgSvg("#logo-iaqse","../img/svg/logo-iaqse.svg")}),function(e,a,g,s,t,c,n){e.GoogleAnalyticsObject=t,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(g),n=a.getElementsByTagName(g)[0],c.async=1,c.src="//www.google-analytics.com/analytics.js",n.parentNode.insertBefore(c,n)}(window,document,"script",0,"ga"),ga("create","UA-40778701-3","auto"),ga("send","pageview")</script>
        </div> 

</body>

</html>